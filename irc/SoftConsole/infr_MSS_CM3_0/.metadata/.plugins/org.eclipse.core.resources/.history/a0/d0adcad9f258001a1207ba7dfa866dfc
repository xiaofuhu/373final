#include <stdio.h>
#include <inttypes.h>
#include "drivers/mss_i2c/mss_i2c.h"

/*the target address is a 7 bit value! */
#define TARGET_ADDRESS    0b1111000


int main()
{
	uint8_t transmit_buf[] = { 0x30,0x01 };
	uint8_t receive_buf[16];

	MSS_I2C_init(&g_mss_i2c1 , TARGET_ADDRESS, MSS_I2C_PCLK_DIV_256 );

	MSS_I2C_write
	(
		&g_mss_i2c1,
		TARGET_ADDRESS,
		transmit_buf,
		sizeof(transmit_buf),
		MSS_I2C_RELEASE_BUS
	);

	MSS_I2C_wait_complete(&g_mss_i2c1, MSS_I2C_NO_TIMEOUT);
	return(0);

	/* the following code is provided as an example I2C read */
	/*
	MSS_I2C_read
	(
	    	&g_mss_i2c1,
	    	TARGET_ADDRESS,
	    	receive_buf,
	    	sizeof(receive_buf),
	    	MSS_I2C_RELEASE_BUS
	 );
	 MSS_I2C_wait_complete(&g_mss_i2c1, MSS_I2C_NO_TIMEOUT); */


}

